# NEWS MANAGEMENT SYSTEM

---
# О запуске проекта:

Чтобы запустить проект необходимо:

1. В корневой папке приложения в gradle модуле: tasks, где находится `application-custom` директория с двумя тасками.
   1.1) Необходимо сначала запустить таску `publishStarters`, которая опубликует все стартеры в приложении в ваш локальный репозиторий.
   1.2) После этого запустить вторую таску: `buildApplicationBootJarsAndPublishStarters`, которая загрузит стартеры и создаст bootJar файлы для запуска приложения в Docker
2. В корне проекта находится `docker-compose` файл, который необходимо запустить в терминале командой `docker-compose up -d`

В корне проекта находится и файл `.env` - в нем определены переменные окружения для запуска в Docker

---
# Об Эндпоинтах:

После запуска приложения можно ознакомиться с его функционалом и эндпоинтами:

В корне проекта находится файл `News-Managment-System.json`, который, при желании, можно импортировать в Postman.
Важно учитывать, что порты в эндпоинтах зависят от портов в `.env` файле.

Подробная информация об эндпоинтах приложения предоставлена в соответствующих документациях:


http://localhost:8083/swagger-ui/index.html - news-api документация

http://localhost:8081/swagger-ui/index.html - user-service документация

---
## Как пользоваться API?

API использует `Spring Security`, поэтому не все эндпоинты открыты для не аутентифицированного пользователя

Изначально доступ открыт в следующие эндпоинты: 

1. `127.0.0.1:8083/api/v1/news?page={num}&size={num}`
2. `127.0.0.1:8083/api/v1/news/comments`

Для полноценной работы необходимо получить Bearer Token с помощью эндпоинта: `127.0.0.1:8083/tokens`.
Далее этот эндпоинт использовать для авторизации на все остальные эндпоинты.

---

## Роли api

API имеет роли для пользователей.  По умолчанию определены следующие роли:

- Администратор (role `ADMIN`) может производить CRUD-операции со всеми
  сущностями
- Журналист (role `JOURNALIST`) может добавлять и изменять/удалять только свои
  новости
- Подписчик (role `SUBSCRIBER`) может добавлять и изменять/удалять только свои
  комментарии
- Незарегистрированные пользователи могут только просматривать новости и
  комментарии

В приложении определены следующие пользователи по умолчанию: 

- role `ADMIN` : login: `Vlad`, password: `111111`
- role `JOURNALIST`: login `Tosha`, password `1234`
- role `SUBSCRIBER`: login `Lolita`, password: `123123`

---

## Кеширование данных

API использует `LFU/LRU` и `redis` кеши.

Для тонкой настройки, где можно указать вместимость и тип кеша, используется `yaml-файл` в `api` директории.
На основании предоставленных настроек cache-starter создаст необходимые бины.

---

## Покрытие тестами

Код покрыт module, it и e2e тестами.
Покрыты именно: user-service, cache-starter и api модули.

## Спасибо за посещение!)